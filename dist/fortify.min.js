'use strict';(function(){function a(a,b){for(property in b)b.hasOwnProperty(property)&&(a[property]=b[property]);return a}function b(a){if(!a)return{score:0,feedback:'nothing'};var b,c=0,d={};a.split('').forEach(function(a){d[a]=(d[a]||0)+1,c+=5/d[a]});var e={digits:/\d/.test(a),lower:/[a-z]/.test(a),upper:/[A-Z]/.test(a),nonWords:/\W/.test(a)},f=0;for(var g in e)f+=!0===e[g]?1:0;return c+=10*(f-1),b=0==c?'nothing':80<c?'strong':60<c&&80>=c?'good':30<c&&60>=c?'okay':'weak',{score:parseInt(c),feedback:b}}function c(a){var c,d=a.target.self;c&&clearTimeout(c),c=setTimeout(function(){var a=b(d.field.value);d.settings.feedback&&(d.innerBar.className='fortify fortify-'+a.feedback,d.innerBar.textContent=f(a.feedback),d.settings.progressBar&&(d.innerBar.style.width=a.score+'%')),d.settings.callback&&d.settings.callback(a.score,a.feedback)},d.settings.keyTimeout)}function d(a){var c,d=a.target.self;c&&clearTimeout(c),c=setTimeout(function(){var a=b(d.field.value);if(d.settings.feedback){if(!d.confirmField.value)return d.confirmInnerBar.className='fortify fortify-nothing',void(d.confirmInnerBar.textContent='');if(!d.field.value)return d.confirmInnerBar.className='fortify fortify-weak',void(d.confirmInnerBar.textContent='There is nothing in the password field');d.field.value===d.confirmField.value?60>=a.score?(d.confirmInnerBar.className='fortify fortify-'+a.feedback,d.confirmInnerBar.textContent='Password matches, but it is not particularly good'):(d.confirmInnerBar.className='fortify fortify-'+a.feedback,d.confirmInnerBar.textContent='Password matches'):(d.confirmInnerBar.className='fortify fortify-weak',d.confirmInnerBar.textContent='The passwords do not match')}},d.settings.keyTimeout)}function e(a){var c=a.target.self;if(!c.settings.allowSubmission){var d=b(c.field.value);(60>=d.score||c.field.value!=c.confirmField.value)&&a.preventDefault()}}function f(a){return a.charAt(0).toUpperCase()+a.slice(1)}this.Fortify=function(b,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};this.field=b,this.confirmField=f,this.form=this.field.form,this.settings=a({allowSubmission:!0,callback:null,feedback:!0,keyTimeout:150,progressBar:!0},g),this.bar=document.createElement('div'),this.innerBar=document.createElement('div'),this.confirmBar=document.createElement('div'),this.confirmInnerBar=document.createElement('div'),this.bar.className='fortify-bar',this.innerBar.className='fortify fortify-nothing',this.confirmBar.className='fortify-bar',this.confirmInnerBar.className='fortify fortify-nothing',this.bar.appendChild(this.innerBar),this.field.parentNode.insertBefore(this.bar,this.field.nextSibling),this.confirmBar.appendChild(this.confirmInnerBar),this.confirmField.parentNode.insertBefore(this.confirmBar,this.confirmField.nextSibling),this.field.self=this,this.confirmField.self=this,this.form.self=this,this.field.addEventListener('keypress',c),this.field.addEventListener('keyup',c),this.field.addEventListener('keydown',c),this.field.addEventListener('keypress',d),this.field.addEventListener('keyup',d),this.field.addEventListener('keydown',d),this.confirmField.addEventListener('keypress',d),this.confirmField.addEventListener('keyup',d),this.confirmField.addEventListener('keydown',d),this.form.addEventListener('submit',e)}})();